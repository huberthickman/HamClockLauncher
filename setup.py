
"""
This is a setup.py script generated by py2applet

Usage:
    python setup.py py2app
"""
from setuptools import setup
import shutil
import sys
import datetime
import fileinput

version_string = "3.1.1"

#
# Modify the build_info text file to have the current build date, number and correct version
#

APP = ['hamclock_launcher.py']

if sys.platform == 'darwin':
    import py2app.recipes
    class PIL_recipe:
        def check(self, cmd, mf):
            m = mf.findNode("PIL")
            if m is None or m.filename is None:
                return None

            # Exclude from site-packages.zip
            return {"packages": ["PIL"]}


    py2app.recipes.PIL = PIL_recipe()

    Plist = dict(
        CFBundleName='HamClockLauncher',
        CFBundleGetInfoString='HamClockLauncher',
        CFBundleShortVersionString='0.1.0',
        )

    print(Plist)
    OPTIONS = {'argv_emulation': False,
               'resources': ['hamclock_bin'],
                             #'cacert.pem'],
               'plist': Plist,
               'includes': ['six', 'packaging', 'packaging.version','wx',
                            'packaging.specifiers', 'packaging.requirements', 'appdirs', 'requests', 'OpenSSL',
                            'pyasn1', 'certifi', 'ndg-httpsclient', 'mcpi'],
               'packages': ['wx']
              # 'codesign_entitlements': 'entitlements.plist'

               }

    setup(
        app=APP,
        #data_files=DATA_FILES,
        options={'py2app': OPTIONS},
        setup_requires=['py2app'],

    )
